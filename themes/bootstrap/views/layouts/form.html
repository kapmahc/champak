{{define "form"}}
{{$l := .locale}}
<h2>{{.title}}</h2>
<hr/>
<form method="{{.method}}" action="{{.action}}">
  {{ .csrfField }}
  <input type="hidden" name="next" value="{{.next}}"/>
  {{range .fields}}
    {{if eq .Type "email"}}
      <div class="form-group">
        <label for="{{.ID}}">{{if .Require}}*{{end}}{{.Label}}:</label>
        <input value="{{.Value}}" {{if .ReadOnly}}readonly{{end}} type="email" class="form-control" name="{{.ID}}" id="{{.ID}}" aria-describedby="{{.ID}}Help" placeholder="{{.Placeholder}}">
        <small id="{{.ID}}Help" class="form-text text-muted">
          {{.Help}}
        </small>
      </div>
    {{else if eq .Type "text"}}
      <div class="form-group">
        <label for="{{.ID}}">{{if .Require}}*{{end}}{{.Label}}:</label>
        <input value="{{.Value}}" {{if .ReadOnly}}readonly{{end}} type="text" class="form-control" name="{{.ID}}" id="{{.ID}}" aria-describedby="{{.ID}}Help" placeholder="{{.Placeholder}}">
        <small id="{{.ID}}Help" class="form-text text-muted">
          {{.Help}}
        </small>
      </div>
    {{else if eq .Type "select"}}
      <div class="form-group">
        <label for="{{.ID}}">{{if .Require}}*{{end}}{{.Label}}:</label>
        <select {{if .Multiple}}multiple{{end}} class="form-control" id="{{.ID}}" name="{{.ID}}">          
          {{ range .Options}}
            <option value="{{.Value}}" {{if .Selected}}selected{{end}}>{{.Label}}</option>
          {{ end }}
        </select>
        <small id="{{.ID}}Help" class="form-text text-muted">
          {{.Help}}
        </small>
      </div>
    {{else if eq .Type "checkbox"}}
      <div class="form-check">
        <label class="form-check-label">
          <input value="true" name="{{.ID}}" id="{{.ID}}" type="checkbox" class="form-check-input" {{if .Value}}checked{{end}}>
          {{.Label}}
        </label>
      </div>
    {{else if eq .Type "password"}}
      <div class="form-group">
        <label for="{{.ID}}">{{if .Require}}*{{end}}{{.Label}}</label>
        <input type="password" class="form-control" name="{{.ID}}" id="{{.ID}}" aria-describedby="{{.ID}}Help" placeholder="{{.Placeholder}}">
        <small id="{{.ID}}Help" class="form-text text-muted">
          {{.Help}}
        </small>
      </div>
    {{else if eq .Type "textarea"}}
      <div class="form-group">
        <label for="{{.ID}}">{{if .Require}}*{{end}}{{.Label}}</label>
        <textarea class="form-control" name="{{.ID}}" id="{{.ID}}" rows="6" aria-describedby="{{.ID}}Help" placeholder="{{.Placeholder}}">{{.Value}}</textarea>
        <small id="{{.ID}}Help" class="form-text text-muted">
          {{.Help}}
        </small>
      </div>
    {{else}}
      <input type="hidden" id="{{.ID}}" name="{{.ID}}" value="{{.Value}}">
    {{end}}
  {{end}}
  <div class="form-group">
    <button type="submit" class="btn btn-primary">{{t $l "buttons.submit"}}</button>
    <button type="reset" class="btn btn-secondary">{{t $l "buttons.reset"}}</button>
  </div>
</form>
{{end}}
