{{define "forum/articles"}}
{{template "dashboard/header" .}}
{{$l := .locale}}
<h2>
  {{.title}}
  <a class="btn btn-primary btn-sm" href="/forum/articles/new">{{t $l "buttons.new"}}</a>
</h2>
<hr/>
<table class="table table-bordered table-hover">
  <thead>
    <tr>
      <th>{{t $l "attributes.title"}}</th>
      <th>{{t $l "attributes.updatedAt"}}</th>
      <th width="15%">{{t $l "buttons.manage"}}</th>
    </tr>
  </thead>
  <tbody>
    {{range .items}}
      <tr>
        <th scope="row">{{.Title}}</th>
        <td>{{dtf .UpdatedAt}}</td>
        <td>
          <div class="btn-group btn-group-sm" role="group">
            <a class="btn btn-primary" href="/forum/articles/show/{{.ID}}" target="_blank">{{t $l "buttons.view"}}</a>
            <a class="btn btn-warning" href="/forum/articles/edit/{{.ID}}">{{t $l "buttons.edit"}}</a>
            <a data-confirm="{{t $l "are-you-sure"}}" data-next="/forum/articles" data-method="delete" class="btn btn-danger" href="/forum/articles/{{.ID}}">{{t $l "buttons.remove"}}</a>
          </div>
        </td>
      </tr>
    {{end}}
  </tbody>
</table>
{{template "footer" .}}
{{end}}

{{define "forum/articles/list"}}
{{template "application/header" .}}
{{$l := .locale}}
<div class="row">
  {{range .articles}}
    <h2>{{.Title}}</h2>
    <hr/>
    <blockquote class="blockquote">
      <p class="mb-0">{{.Summary}}</p>
      <footer class="blockquote-footer">
        {{dtf .UpdatedAt}}
        <cite>
          <a target="_blank" href="/forum/articles/show/{{.ID}}">{{t $l "buttons.view"}}</a>
        </cite>
      </footer>
    </blockquote>
  {{end}}
</div>
{{template "footer" .}}
{{end}}

{{define "forum/articles/list_card"}}
{{template "application/header" .}}
{{$l := .locale}}
<h2>{{.title}}</h2>
<hr/>
<div class="row">
  {{range .articles}}
    <div class="col-md-3">
      <div class="card card-block">
        <h4 class="card-title">{{.Title}}</h4>
        <p class="card-text">{{.Summary}}</p>
        <a target="_blank" href="/forum/articles/show/{{.ID}}" class="card-link">{{t $l "buttons.view"}}</a>
      </div>
    </div>
  {{end}}
</div>
{{template "footer" .}}
{{end}}


{{define "forum/articles/show"}}
{{template "application/header" .}}
{{$l := .locale}}
<div class="row">
  <h2>{{.title}}</h2>
  <hr/>
  {{if .article}}
    <blockquote class="blockquote">
      <p class="mb-0">{{.article.Summary}}</p>
      <footer class="blockquote-footer">
        {{.article.User.FullName}} {{dtf .article.UpdatedAt}}
        <cite>
          {{range .article.Tags}}
            <a href="/forum/tags/show/{{.ID}}" target="_blank">{{.Name}}</a>
          {{end}}
        </cite>
      </footer>
    </blockquote>
    <p class="markdown">{{.article.Body}}</p>
    <h4>
      {{t $l "forum.comments.latest.title"}}
      {{if .currentUser}}
        <a class="btn btn-primary btn-sm" href="/forum/comments/new?articleID={{.article.ID}}">{{t $l "forum.comments.new.title"}}</a>
      {{end}}
    </h4>
    <hr/>
    {{range .article.Comments}}
      <blockquote class="blockquote">
        <p class="mb-0 markdown">{{.Body}}</p>
        <footer class="blockquote-footer">
          {{dtf .UpdatedAt}}
          <cite></cite>
        </footer>
      </blockquote>
    {{end}}
  {{end}}
</div>
{{template "footer" .}}
{{end}}
